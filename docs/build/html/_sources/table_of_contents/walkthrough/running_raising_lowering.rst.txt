==============================
Raising/Lowering
==============================

The raising_lowering module just has one script, ``shift_j.py``,
which applies the raising and lowering operators to a wavefunction
generated by ncsd.

0. Make sure you're on ``cedar``, in an interactive session.

To enter an interactive session, do something like this::

    salloc --account=rrg-navratil --time=0-08:00 --ntasks=1 --mem-per-cpu=4G

1. Open the ``raising_lowering`` directory, and the ``shift_j.py`` file within.

2. You'll see some parameters to adjust::

    eig_path = "/scratch/callum/Li8Li9/ncsd/output/mfdp.egv"
    exe_path = "eigv_Jplus.exe"
    N = 6
    Z = 3
    max_2J = 5

Edit them for your specific case.
In this case, our initial values of 2J and 2T are 1 and 3
(but those are set atomatically).

So if we want to have eigenvector files with 2J from -3 to 3, say, we could
change the last line there, to this::

    max_2J = 3

Or if we wanted -7 to 7::

    max_2J = 7

3. Once you have finished, run the file::

    python shift_j.py

This will create a directory for each run, and put all the necessary files
inside. Then depending on the value of ``run``, it will run the batch file
in the directory. If ``run=False``, you'll have to do that yourself.

The batch script was created such that the output from ncsd gets plotted
automatically, i.e. the next section should already be done, but you may
want to edit those plots so still read the next section.

Plot NCSD Output
----------------

So now you have ncsd output, but it's not in a directly plottable format.

The filename will look something like ``Li8_n3lo-NN3Nlnl-srg2.0_Nmax0-10.20``.

The script ``output_plotter.py`` will plot the energies of various states
for your nucleus of interest.

For example, the file listed above produced the following plot
(using filler data for experimental values, our calculation wasn't THAT good):

.. raw:: html

    <a href="https://i.imgur.com/JcXMeMW.jpg" >
        <img src="https://i.imgur.com/JcXMeMW.jpg"/>
    </a>

This is just the auto-generated matplotlib plot, which could use some work
in terms of beauty, but it illustrates what gets plotted.
The xmgrace version plots channel titles too.

.. admonition:: Future Work

    The matplotlib graph could be better, with channel titles etc.

If you want your plot to exclude certain Nmax values or something,
there are parameters in the ``output_plotter.py`` file that you can edit,
and then re-run, same kind of idea as with ``ncsd_multi.py``.



